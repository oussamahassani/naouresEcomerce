<!-- header start -->
<app-header-one [transparent]="true" [white_bg]="true"></app-header-one>
<!-- header end -->

<main>

  <!-- breadcrumb start -->
  <app-breadcrumb-one title="Checkout" subtitle="Checkout"></app-breadcrumb-one>
  <!-- breadcrumb end -->

  <!-- coupon-area start -->
  <section class="coupon-area pt-100 pb-30" *ngIf="cartService.getCartProducts().length > 0">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div class="coupon-accordion">
            <!-- ACCORDION START -->
            <h3>Returning customer? <span id="showlogin" (click)="handleOpenLogin()">Click here to login</span></h3>
            <div *ngIf="isOpenLogin" id="checkout-login" class="coupon-content">
              <div class="coupon-info">
                <p class="coupon-text">Quisque gravida turpis sit amet nulla posuere lacinia. Cras sed est
                  sit amet ipsum luctus.</p>
                <form action="#">
                  <p class="form-row-first">
                    <label>Username or email <span class="required">*</span></label>
                    <input type="text" />
                  </p>
                  <p class="form-row-last">
                    <label>Password <span class="required">*</span></label>
                    <input type="text" />
                  </p>
                  <p class="form-row">
                    <button class="os-btn os-btn-black" type="submit">Login</button>
                    <label>
                      <input type="checkbox" />
                      Remember me
                    </label>
                  </p>
                  <p class="lost-password">
                    <a href="#">Lost your password?</a>
                  </p>
                </form>
              </div>
            </div>
            <!-- ACCORDION END -->
          </div>
        </div>
        <div class="col-md-6">
          <div class="coupon-accordion">
            <!-- ACCORDION START -->
            <h3>Have a coupon? <span id="showcoupon" (click)="handleOpenCoupon()">Click here to enter your code</span>
            </h3>
            <div *ngIf="isOpenCoupon" id="checkout_coupon" class="coupon-checkout-content">
              <div class="coupon-info">
                <form action="#">
                  <p class="checkout-coupon">
                    <input type="text" placeholder="Coupon Code" />
                    <button class="os-btn os-btn-black" type="submit">Apply Coupon</button>
                  </p>
                </form>
              </div>
            </div>
            <!-- ACCORDION END -->
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- coupon-area end -->

  <!-- checkout-area start -->
  <section class="checkout-area pb-70">
    <div class="container">
      <div *ngIf="cartService.getCartProducts().length === 0;else checkoutBlock" class="text-center pt-80 pb-30">
        <h3 class="py-2">No items found in cart to checkout</h3>
        <a routerLink="/shop" class="os-btn os-btn-black">
          Return to shop
        </a>
      </div>

      <ng-template #checkoutBlock>
        <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <div class="col-lg-6">
              <div class="checkbox-form">
                <h3>Billing Details</h3>
                <div class="row">
                  <div class="col-md-12">
                    <div class="country-select">
                      <label>Country <span class="required">*</span></label>
                      <select formControlName="country">
                        <option value="bangladesh">Bangladesh</option>
                        <option value="algeria">Algeria</option>
                        <option value="afghanistan">Afghanistan</option>
                        <option value="ghana">Ghana</option>
                        <option value="albania">Albania</option>
                        <option value="bahrain">Bahrain</option>
                        <option value="colombia">Colombia</option>
                        <option value="dominican-republic">Dominican Republic</option>
                      </select>
                      <!-- error message -->
                      <span *ngIf="country?.hasError('required') && (country?.touched ||formSubmitted)"
                        class="text-danger">
                        Country is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="checkout-form-list">
                      <label>First Name <span class="required">*</span></label>
                      <input type="text" id="firstName" placeholder="" formControlName="firstName" />
                      <!-- error message -->
                      <span *ngIf="firstName?.hasError('required') && (firstName?.touched ||formSubmitted)" class="text-danger">
                        First Name is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="checkout-form-list">
                      <label>Last Name <span class="required">*</span></label>
                      <input type="text" id="lastName" placeholder="" formControlName="lastName" />
                      <!-- error message -->
                      <span *ngIf="lastName?.hasError('required') && (lastName?.touched ||formSubmitted)" class="text-danger">
                        Last Name is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="checkout-form-list">
                      <label>Company Name</label>
                      <input type="text" id="company" placeholder="" formControlName="company" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="checkout-form-list">
                      <label>Address <span class="required">*</span></label>
                      <input type="text" id="address" placeholder="Street address" formControlName="address" />
                      <!-- error message -->
                      <span *ngIf="address?.hasError('required') && (address?.touched ||formSubmitted)" class="text-danger">
                        Address is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="checkout-form-list">
                      <input id="apartment" type="text" formControlName="apartment" placeholder="Apartment, suite, unit etc. (optional)" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="checkout-form-list">
                      <label>Town / City <span class="required">*</span></label>
                      <input type="text" id="city" placeholder="Town / City" formControlName="city"/>
                      <!-- error message -->
                      <span *ngIf="city?.hasError('required') && (city?.touched ||formSubmitted)" class="text-danger">
                        City is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="checkout-form-list">
                      <label>State / County <span class="required">*</span></label>
                      <input type="text" id="state" placeholder="" formControlName="state" />
                      <!-- error message -->
                      <span *ngIf="state?.hasError('required') && (state?.touched ||formSubmitted)" class="text-danger">
                        State is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="checkout-form-list">
                      <label>Postcode / Zip <span class="required">*</span></label>
                      <input type="text" id="zipCode" placeholder="Postcode / Zip" formControlName="zipCode" />
                      <!-- error message -->
                      <span *ngIf="zipCode?.hasError('required') && (zipCode?.touched ||formSubmitted)" class="text-danger">
                        ZipCode is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="checkout-form-list">
                      <label>Email Address <span class="required">*</span></label>
                      <input type="email" placeholder="" id="email" formControlName="email"/>
                      <!-- error msg start -->
                      <span *ngIf="(email?.hasError('required') && email?.touched) || (email?.hasError('email') && email?.dirty) || (formSubmitted && !email?.value)" class="text-danger" >
                        Email is required and must be a valid email address
                      </span>
                      <!-- error msg end -->
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="checkout-form-list">
                      <label>Phone <span class="required">*</span></label>
                      <input type="text" placeholder="Phone" id="phone" formControlName="phone" />
                      <!-- error message -->
                      <span *ngIf="phone?.hasError('required') && (phone?.touched ||formSubmitted)" class="text-danger">
                        Last Name is required
                      </span>
                      <!-- error message -->
                    </div>
                  </div>
                </div>
                <div class="different-address">
                  <div class="order-notes">
                    <div class="checkout-form-list">
                      <label>Order Notes</label>
                      <textarea formControlName="orderNote" id="checkout-mess" cols="30" rows="10"
                        placeholder="Notes about your order, e.g. special notes for delivery."></textarea>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="your-order mb-30 ">
                <h3>Your order</h3>
                <div class="your-order-table table-responsive">
                  <table>
                    <thead>
                      <tr>
                        <th class="product-name">Product</th>
                        <th class="product-total">Total</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of cartService.getCartProducts()" class="cart_item">
                        <td class="product-name">
                          {{item.title}} <strong class="product-quantity"> × {{item.orderQuantity}}</strong>
                        </td>
                        <td class="product-total">
                          <span class="amount">${{item.price.toFixed(2)}}</span>
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr class="cart-subtotal">
                        <th>Cart Subtotal</th>
                        <td>
                          <span class="amount">${{cartService.totalPriceQuantity().total.toFixed(2)}}</span>
                        </td>
                      </tr>
                      <tr class="shipping">
                        <th>Shipping</th>
                        <td>
                          <ul>
                            <li>
                              <input type="radio" />
                              <label (click)="handleShippingCost(7.00)">
                                Flat Rate: <span class="amount">$7.00</span>
                              </label>
                            </li>
                            <li>
                              <input type="radio" />
                              <label (click)="handleShippingCost('free')">Free Shipping:</label>
                            </li>
                          </ul>
                        </td>
                      </tr>
                      <tr class="order-total">
                        <th>Order Total</th>
                        <td><strong><span class="amount">
                          ${{(cartService.totalPriceQuantity().total + shipCost).toFixed(2)}}
                         </span></strong>
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </div>

                <div class="payment-method">
                  <div class="accordion" id="accordionExample">
                    <div class="card">
                      <div class="card-header" id="headingOne">
                        <h5 class="mb-0">
                          <button class="btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                            aria-expanded="true" aria-controls="collapseOne">
                            Direct Bank Transfer
                          </button>
                        </h5>
                      </div>
                      <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                        data-bs-parent="#accordionExample">
                        <div class="card-body">
                          Make your payment directly into our bank account. Please use your Order ID
                          as the payment
                          reference. Your order won’t be
                          shipped until the funds have cleared in our account.
                        </div>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-header" id="headingThree">
                        <h5 class="mb-0">
                          <button class="btn-link collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            PayPal
                          </button>
                        </h5>
                      </div>
                      <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                        data-bs-parent="#accordionExample">
                        <div class="card-body">
                          Pay via PayPal; you can pay with your credit card if you don’t have a
                          PayPal account.
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="order-button-payment mt-20">
                    <button type="submit" class="os-btn os-btn-black">Place order</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </ng-template>
    </div>
  </section>
  <!-- checkout-area end -->

</main>

<!-- footer start -->
<app-footer-one></app-footer-one>
<!-- footer end -->
